<!-- Generate a structured coalescent tree from a given number of taxa. -->

<beast version='2.0' namespace='hamlet.beast:beast.core.parameter'>
    <run spec='InheritanceTrajectory'
         verbosity='2'
	 samplePopulationSizes="true">
        
        <model spec='InheritanceModel'>
            <populationType spec='PopulationType' typeName='X' id='X' dim="2"/>

            <reactionGroup spec='InheritanceReactionGroup' reactionGroupName='Coalescence'>
	      <reaction spec='InheritanceReaction' rate="1.0">
                2X[0]:1 -> X[0]:1
	      </reaction>
	      <reaction spec='InheritanceReaction' rate="1.0">
                2X[1]:1 -> X[1]:1
	      </reaction>
            </reactionGroup>

            <reactionGroup spec='InheritanceReactionGroup' reactionGroupName='Migration'>
	      <reaction spec='InheritanceReaction' rate="1.0">
                X[0] -> X[1]
	      </reaction>
	      <reaction spec='InheritanceReaction' rate="1.0">
                X[1] -> X[0]
	      </reaction>
            </reactionGroup>

        </model>                

        <initialState spec='InitState'>
	  <lineageSeed spec='Individual'>
	    <population spec='Population' type='@X' location="1"/>
	  </lineageSeed>
	  <lineageSeed spec='Individual'>
	    <population spec='Population' type='@X' location="0"/>
	  </lineageSeed>
	  <lineageSeed spec='Individual'>
	    <population spec='Population' type='@X' location="0"/>
	  </lineageSeed>
        </initialState>
        
        <lineageEndCondition spec='LineageEndCondition' nLineages="1"/>
                
        <output spec='NexusOutput' fileName='out.tree' reverseTime="true"/>
	<output spec='JsonOutput' fileName='out.json'/>
    </run>
</beast>
